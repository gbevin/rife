<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
    <meta name="generator" content="JHighlight v1.0 (http://jhighlight.dev.java.net)" />
    <title>08_advanced_continuations/src/Order.java</title>
    <link rel="Help" href="http://jhighlight.dev.java.net" />
    <style type="text/css">
code {
color: rgb(0,0,0); font-family: monospace; font-size: 12px; white-space: nowrap;
}
.java_type {
color: rgb(0,44,221);
}
.java_comment {
color: rgb(147,147,147); background-color: rgb(247,247,247);
}
.java_operator {
color: rgb(0,124,31);
}
.java_separator {
color: rgb(0,33,255);
}
.java_plain {
color: rgb(0,0,0);
}
h1 {
font-family: sans-serif; font-size: 16pt; font-weight: bold; color: rgb(0,0,0); background: rgb(210,210,210); border: solid 1px black; padding: 5px; text-align: center;
}
.java_javadoc_comment {
color: rgb(147,147,147); background-color: rgb(247,247,247); font-style: italic;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_literal {
color: rgb(188,0,0);
}
.java_javadoc_tag {
color: rgb(147,147,147); background-color: rgb(247,247,247); font-style: italic; font-weight: bold;
}
    </style>
</head>
<body>
<h1>08_advanced_continuations/src/Order.java</h1><code><span class="java_comment">/*</span><br />
<span class="java_comment">&nbsp;*&nbsp;Copyright&nbsp;2001-2007&nbsp;Geert&nbsp;Bevin&nbsp;&lt;gbevin[remove]&nbsp;at&nbsp;uwyn&nbsp;dot&nbsp;com&gt;</span><br />
<span class="java_comment">&nbsp;*&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;License,&nbsp;Version&nbsp;2.0&nbsp;(the&nbsp;&quot;License&quot;)</span><br />
<span class="java_comment">&nbsp;*&nbsp;$Id:&nbsp;Order.java&nbsp;3877&nbsp;2007-08-03&nbsp;19:48:10Z&nbsp;gbevin&nbsp;$</span><br />
<span class="java_comment">&nbsp;*/</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">continuations</span><span class="java_separator">.</span><span class="java_type">ContinuationContext</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">engine</span><span class="java_separator">.</span><span class="java_type">Element</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">engine</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Elem</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">engine</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Param</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">engine</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Submission</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">engine</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">SubmissionBean</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">site</span><span class="java_separator">.</span><span class="java_type">ValidatedConstrained</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_keyword">import</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">uwyn</span><span class="java_separator">.</span><span class="java_plain">rife</span><span class="java_separator">.</span><span class="java_plain">template</span><span class="java_separator">.</span><span class="java_type">Template</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_plain"></span><br />
<span class="java_javadoc_comment">/**</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;This&nbsp;element&nbsp;handles&nbsp;a&nbsp;basic&nbsp;multi-step&nbsp;order&nbsp;checkout&nbsp;process.</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;&lt;p&gt;</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;Continuations&nbsp;are&nbsp;used&nbsp;to&nbsp;handle&nbsp;the&nbsp;intermediate&nbsp;data&nbsp;submissions.</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;By&nbsp;providing&nbsp;a&nbsp;custom&nbsp;&lt;code&gt;clone()&lt;/code&gt;&nbsp;implementation,&nbsp;the</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;individual&nbsp;steps&nbsp;are&nbsp;prefilled&nbsp;with&nbsp;earlier&nbsp;submitted&nbsp;data</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;if&nbsp;the&nbsp;user&nbsp;has&nbsp;pressed&nbsp;the&nbsp;back&nbsp;button.</span><br />
<span class="java_javadoc_comment">&nbsp;*</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;</span><span class="java_javadoc_tag">@author</span><span class="java_javadoc_comment">&nbsp;Geert&nbsp;Bevin&nbsp;(gbevin[remove]&nbsp;at&nbsp;uwyn&nbsp;dot&nbsp;com)</span><br />
<span class="java_javadoc_comment">&nbsp;*&nbsp;</span><span class="java_javadoc_tag">@version</span><span class="java_javadoc_comment">&nbsp;$Revision:&nbsp;3877&nbsp;$</span><br />
<span class="java_javadoc_comment">&nbsp;*/</span><span class="java_plain"></span><br />
<span class="java_plain">@</span><span class="java_type">Elem</span><span class="java_separator">(</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;submissions&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Submission</span><span class="java_separator">(</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;selectShipping&quot;</span><span class="java_separator">,</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beans&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;@</span><span class="java_type">SubmissionBean</span><span class="java_separator">(</span><span class="java_plain">&nbsp;beanclass&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderData</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;group&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderDataMetaData</span><span class="java_separator">.</span><span class="java_plain">GROUP_SHIPPING&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">),</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Submission</span><span class="java_separator">(</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;provideCreditCard&quot;</span><span class="java_separator">,</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beans&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;@</span><span class="java_type">SubmissionBean</span><span class="java_separator">(</span><span class="java_plain">&nbsp;beanclass&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderData</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;group&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderDataMetaData</span><span class="java_separator">.</span><span class="java_plain">GROUP_CREDITCARD</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">},</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;@</span><span class="java_type">Param</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_separator">.</span><span class="java_plain">PARAM_BACK</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain"></span><br />
<span class="java_separator">)</span><span class="java_plain"></span><br />
<span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Element</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;&nbsp;PARAM_BACK&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;back&quot;</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderData</span><span class="java_plain">&nbsp;order&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderData</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processElement</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Template</span><span class="java_plain">&nbsp;template&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getHtmlTemplate</span><span class="java_separator">(</span><span class="java_literal">&quot;order&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;handle&nbsp;the&nbsp;submission&nbsp;of&nbsp;the&nbsp;shipping&nbsp;details</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generateForm</span><span class="java_separator">(</span><span class="java_plain">template</span><span class="java_separator">,</span><span class="java_plain">&nbsp;order</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template</span><span class="java_separator">.</span><span class="java_plain">setBlock</span><span class="java_separator">(</span><span class="java_literal">&quot;content_form&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;content_shipping&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print</span><span class="java_separator">(</span><span class="java_plain">template</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pause</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template</span><span class="java_separator">.</span><span class="java_plain">clear</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">((</span><span class="java_type">ValidatedConstrained</span><span class="java_separator">)</span><span class="java_plain">order</span><span class="java_separator">).</span><span class="java_plain">resetValidation</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillSubmissionBean</span><span class="java_separator">(</span><span class="java_plain">order</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_keyword">while</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">duringStepBack</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_operator">||</span><span class="java_plain">&nbsp;</span><span class="java_operator">!</span><span class="java_separator">((</span><span class="java_type">ValidatedConstrained</span><span class="java_separator">)</span><span class="java_plain">order</span><span class="java_separator">).</span><span class="java_plain">validateGroup</span><span class="java_separator">(</span><span class="java_type">OrderDataMetaData</span><span class="java_separator">.</span><span class="java_plain">GROUP_SHIPPING</span><span class="java_separator">));</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;handle&nbsp;the&nbsp;submission&nbsp;of&nbsp;the&nbsp;credit&nbsp;card&nbsp;details</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generateForm</span><span class="java_separator">(</span><span class="java_plain">template</span><span class="java_separator">,</span><span class="java_plain">&nbsp;order</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template</span><span class="java_separator">.</span><span class="java_plain">setBlock</span><span class="java_separator">(</span><span class="java_literal">&quot;content_form&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;content_creditcard&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print</span><span class="java_separator">(</span><span class="java_plain">template</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pause</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template</span><span class="java_separator">.</span><span class="java_plain">clear</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">((</span><span class="java_type">ValidatedConstrained</span><span class="java_separator">)</span><span class="java_plain">order</span><span class="java_separator">).</span><span class="java_plain">resetValidation</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillSubmissionBean</span><span class="java_separator">(</span><span class="java_plain">order</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">hasParameterValue</span><span class="java_separator">(</span><span class="java_plain">PARAM_BACK</span><span class="java_separator">))</span><span class="java_plain">&nbsp;stepBack</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_keyword">while</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_operator">!</span><span class="java_separator">((</span><span class="java_type">ValidatedConstrained</span><span class="java_separator">)</span><span class="java_plain">order</span><span class="java_separator">).</span><span class="java_plain">validateGroup</span><span class="java_separator">(</span><span class="java_type">OrderDataMetaData</span><span class="java_separator">.</span><span class="java_plain">GROUP_CREDITCARD</span><span class="java_separator">));</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;provide&nbsp;an&nbsp;overview&nbsp;of&nbsp;everything&nbsp;that&nbsp;has&nbsp;been&nbsp;submitted</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template</span><span class="java_separator">.</span><span class="java_plain">setBean</span><span class="java_separator">(</span><span class="java_plain">order</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template</span><span class="java_separator">.</span><span class="java_plain">setBlock</span><span class="java_separator">(</span><span class="java_literal">&quot;content&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;content_overview&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print</span><span class="java_separator">(</span><span class="java_plain">template</span><span class="java_separator">);</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;remove&nbsp;any&nbsp;continuation&nbsp;contexts&nbsp;that&nbsp;are&nbsp;active&nbsp;in&nbsp;this&nbsp;tree</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ContinuationContext</span><span class="java_separator">.</span><span class="java_plain">getActiveContext</span><span class="java_separator">().</span><span class="java_plain">removeContextTree</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;clone</span><span class="java_separator">()</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">CloneNotSupportedException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;This&nbsp;clone&nbsp;implementation&nbsp;uses&nbsp;the&nbsp;standard&nbsp;Element&nbsp;clone&nbsp;method.</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;The&nbsp;order&nbsp;member&nbsp;variable&nbsp;will&nbsp;be&nbsp;preserved&nbsp;as-is&nbsp;however.</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;The&nbsp;result&nbsp;is&nbsp;that&nbsp;even&nbsp;when&nbsp;the&nbsp;user&nbsp;presses&nbsp;the&nbsp;back&nbsp;button&nbsp;and</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;re-submits&nbsp;a&nbsp;previous&nbsp;step,&nbsp;the&nbsp;earlier&nbsp;submitted&nbsp;data&nbsp;will&nbsp;be</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_comment">//&nbsp;used&nbsp;to&nbsp;automatically&nbsp;fill&nbsp;in&nbsp;the&nbsp;already&nbsp;answered&nbsp;steps.</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;cloned&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Order</span><span class="java_separator">)</span><span class="java_keyword">super</span><span class="java_separator">.</span><span class="java_plain">clone</span><span class="java_separator">();</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cloned</span><span class="java_separator">.</span><span class="java_plain">order&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;order</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;cloned</span><span class="java_separator">;</span><span class="java_plain"></span><br />
<span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain"></span><br />
<span class="java_separator">}</span><span class="java_plain"></span><br />
</code>
</body>
</html>
